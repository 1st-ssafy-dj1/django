{"filter":false,"title":"views.py","tooltip":"/my-bixby-hphk/schedules/views.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":58,"column":29},"end":{"row":58,"column":30},"action":"insert","lines":[" "],"id":190},{"start":{"row":58,"column":30},"end":{"row":58,"column":31},"action":"insert","lines":["d"]},{"start":{"row":58,"column":31},"end":{"row":58,"column":32},"action":"insert","lines":["o"]},{"start":{"row":58,"column":32},"end":{"row":58,"column":33},"action":"insert","lines":["n"]},{"start":{"row":58,"column":33},"end":{"row":58,"column":34},"action":"insert","lines":["e"]}],[{"start":{"row":5,"column":29},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":191},{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"insert","lines":["f"]}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"remove","lines":["f"],"id":192}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"insert","lines":["i"],"id":193},{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"insert","lines":["m"]},{"start":{"row":6,"column":2},"end":{"row":6,"column":3},"action":"insert","lines":["p"]},{"start":{"row":6,"column":3},"end":{"row":6,"column":4},"action":"insert","lines":["o"]},{"start":{"row":6,"column":4},"end":{"row":6,"column":5},"action":"insert","lines":["r"]},{"start":{"row":6,"column":5},"end":{"row":6,"column":6},"action":"insert","lines":["t"]}],[{"start":{"row":6,"column":6},"end":{"row":6,"column":7},"action":"insert","lines":[" "],"id":194},{"start":{"row":6,"column":7},"end":{"row":6,"column":8},"action":"insert","lines":["d"]},{"start":{"row":6,"column":8},"end":{"row":6,"column":9},"action":"insert","lines":["a"]},{"start":{"row":6,"column":9},"end":{"row":6,"column":10},"action":"insert","lines":["t"]},{"start":{"row":6,"column":10},"end":{"row":6,"column":11},"action":"insert","lines":["e"]},{"start":{"row":6,"column":11},"end":{"row":6,"column":12},"action":"insert","lines":["t"]},{"start":{"row":6,"column":12},"end":{"row":6,"column":13},"action":"insert","lines":["i"]},{"start":{"row":6,"column":13},"end":{"row":6,"column":14},"action":"insert","lines":["m"]},{"start":{"row":6,"column":14},"end":{"row":6,"column":15},"action":"insert","lines":["e"]}],[{"start":{"row":59,"column":36},"end":{"row":60,"column":0},"action":"insert","lines":["",""],"id":195},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"remove","lines":["    "],"id":196}],[{"start":{"row":60,"column":0},"end":{"row":61,"column":0},"action":"insert","lines":["",""],"id":197}],[{"start":{"row":61,"column":0},"end":{"row":62,"column":27},"action":"insert","lines":["@api_view(['GET'])","def schedule_list(request):"],"id":198}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":17},"action":"remove","lines":["schedule_list"],"id":199},{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"insert","lines":["v"]},{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"insert","lines":["-"]}],[{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"remove","lines":["-"],"id":200}],[{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"insert","lines":["_"],"id":201}],[{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"remove","lines":["_"],"id":202},{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"remove","lines":["v"]}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"insert","lines":["V"],"id":203}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"remove","lines":["V"],"id":204}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"insert","lines":["v"],"id":205},{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"insert","lines":["l"]}],[{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"remove","lines":["l"],"id":206},{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"remove","lines":["v"]}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":5},"action":"insert","lines":["v"],"id":207},{"start":{"row":62,"column":5},"end":{"row":62,"column":6},"action":"insert","lines":["l"]},{"start":{"row":62,"column":6},"end":{"row":62,"column":7},"action":"insert","lines":["i"]},{"start":{"row":62,"column":7},"end":{"row":62,"column":8},"action":"insert","lines":["f"]},{"start":{"row":62,"column":8},"end":{"row":62,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":9},"action":"remove","lines":["e"],"id":208},{"start":{"row":62,"column":7},"end":{"row":62,"column":8},"action":"remove","lines":["f"]}],[{"start":{"row":62,"column":7},"end":{"row":62,"column":8},"action":"insert","lines":["v"],"id":209},{"start":{"row":62,"column":8},"end":{"row":62,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":21,"column":0},"end":{"row":59,"column":36},"action":"remove","lines":["# V-LIVE 크롤링","def vlive_crawling(request):","    ","    current_time = datetime.datetime.now()","    current_time = int(current_time.strftime('%Y%m%d'))","    vlive_base_url = 'https://www.vlive.tv'","    ","    for i in range(1):","        url = f\"https://www.vlive.tv/upcoming?d={current_time+i}\"","        response = requests.get(url)","        soup = BeautifulSoup(response.text, 'html.parser')","        upcoming_list = soup.find('ul', {'class':'upcoming_list'}).find_all('li')","        ","        ","        for chart in upcoming_list:","            ","            group_name = chart.find('em', {'class':'name'}) ","            group_name = group_name.text if group_name else ''","            ","            time = f'{current_time} ' + chart.find('span', {'class':'time'}).text","            # print(time)","            ","            title_tag = chart.find('a', {'class':'_title'})","            title = title_tag.text","            ","            entering_url = vlive_base_url + title_tag['href']","            poster_url = chart.find('a', {'class':'thumb _videoThumb'}).find('img')['src']","    ","            start_at = datetime.datetime.strptime(time, '%Y%m%d %I:%M %p')","            ","            VliveUpcoming( ","                title = title,","                group = group_name,","                start_at = start_at,","                site_url = entering_url,","                poster_url = poster_url","                ).save()","    ","    return HttpResponse(\"well done\")"],"id":210},{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["",""]},{"start":{"row":19,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":22,"column":19},"end":{"row":23,"column":0},"action":"insert","lines":["",""],"id":211},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"insert","lines":["    "]},{"start":{"row":23,"column":4},"end":{"row":24,"column":0},"action":"insert","lines":["",""]},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"insert","lines":["    "]},{"start":{"row":24,"column":4},"end":{"row":25,"column":0},"action":"insert","lines":["",""]},{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"remove","lines":["    "],"id":212}],[{"start":{"row":25,"column":0},"end":{"row":63,"column":36},"action":"insert","lines":["# V-LIVE 크롤링","def vlive_crawling(request):","    ","    current_time = datetime.datetime.now()","    current_time = int(current_time.strftime('%Y%m%d'))","    vlive_base_url = 'https://www.vlive.tv'","    ","    for i in range(1):","        url = f\"https://www.vlive.tv/upcoming?d={current_time+i}\"","        response = requests.get(url)","        soup = BeautifulSoup(response.text, 'html.parser')","        upcoming_list = soup.find('ul', {'class':'upcoming_list'}).find_all('li')","        ","        ","        for chart in upcoming_list:","            ","            group_name = chart.find('em', {'class':'name'}) ","            group_name = group_name.text if group_name else ''","            ","            time = f'{current_time} ' + chart.find('span', {'class':'time'}).text","            # print(time)","            ","            title_tag = chart.find('a', {'class':'_title'})","            title = title_tag.text","            ","            entering_url = vlive_base_url + title_tag['href']","            poster_url = chart.find('a', {'class':'thumb _videoThumb'}).find('img')['src']","    ","            start_at = datetime.datetime.strptime(time, '%Y%m%d %I:%M %p')","            ","            VliveUpcoming( ","                title = title,","                group = group_name,","                start_at = start_at,","                site_url = entering_url,","                poster_url = poster_url","                ).save()","    ","    return HttpResponse(\"well done\")"],"id":213}],[{"start":{"row":22,"column":19},"end":{"row":23,"column":0},"action":"insert","lines":["",""],"id":214},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"insert","lines":["    "]},{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"insert","lines":["g"]}],[{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"remove","lines":["g"],"id":215}],[{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"insert","lines":["s"],"id":216},{"start":{"row":23,"column":5},"end":{"row":23,"column":6},"action":"insert","lines":["c"]}],[{"start":{"row":23,"column":5},"end":{"row":23,"column":6},"action":"remove","lines":["c"],"id":217},{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"remove","lines":["s"]}],[{"start":{"row":22,"column":4},"end":{"row":22,"column":5},"action":"insert","lines":["s"],"id":218},{"start":{"row":22,"column":5},"end":{"row":22,"column":6},"action":"insert","lines":["c"]},{"start":{"row":22,"column":6},"end":{"row":22,"column":7},"action":"insert","lines":["h"]},{"start":{"row":22,"column":7},"end":{"row":22,"column":8},"action":"insert","lines":["e"]},{"start":{"row":22,"column":8},"end":{"row":22,"column":9},"action":"insert","lines":["d"]},{"start":{"row":22,"column":9},"end":{"row":22,"column":10},"action":"insert","lines":["u"]},{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"insert","lines":["l"]},{"start":{"row":22,"column":11},"end":{"row":22,"column":12},"action":"insert","lines":["e"]},{"start":{"row":22,"column":12},"end":{"row":22,"column":13},"action":"insert","lines":["_"]}],[{"start":{"row":22,"column":18},"end":{"row":22,"column":19},"action":"insert","lines":["_"],"id":219},{"start":{"row":22,"column":19},"end":{"row":22,"column":20},"action":"insert","lines":["l"]},{"start":{"row":22,"column":20},"end":{"row":22,"column":21},"action":"insert","lines":["i"]},{"start":{"row":22,"column":21},"end":{"row":22,"column":22},"action":"insert","lines":["s"]},{"start":{"row":22,"column":22},"end":{"row":22,"column":23},"action":"insert","lines":["t"]}],[{"start":{"row":23,"column":4},"end":{"row":23,"column":6},"action":"insert","lines":["''"],"id":220}],[{"start":{"row":23,"column":6},"end":{"row":23,"column":7},"action":"insert","lines":["'"],"id":221}],[{"start":{"row":23,"column":7},"end":{"row":24,"column":0},"action":"insert","lines":["",""],"id":222},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"insert","lines":["    "]},{"start":{"row":24,"column":4},"end":{"row":24,"column":5},"action":"insert","lines":["v"]},{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"insert","lines":["-"]}],[{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"remove","lines":["-"],"id":223}],[{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"insert","lines":[" "],"id":224},{"start":{"row":24,"column":6},"end":{"row":24,"column":7},"action":"insert","lines":["v"]},{"start":{"row":24,"column":7},"end":{"row":24,"column":8},"action":"insert","lines":["l"]},{"start":{"row":24,"column":8},"end":{"row":24,"column":9},"action":"insert","lines":["i"]}],[{"start":{"row":24,"column":8},"end":{"row":24,"column":9},"action":"remove","lines":["i"],"id":225},{"start":{"row":24,"column":7},"end":{"row":24,"column":8},"action":"remove","lines":["l"]},{"start":{"row":24,"column":6},"end":{"row":24,"column":7},"action":"remove","lines":["v"]},{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"remove","lines":[" "]},{"start":{"row":24,"column":4},"end":{"row":24,"column":5},"action":"remove","lines":["v"]}],[{"start":{"row":24,"column":4},"end":{"row":24,"column":5},"action":"insert","lines":["V"],"id":226},{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"insert","lines":["-"]},{"start":{"row":24,"column":6},"end":{"row":24,"column":7},"action":"insert","lines":["L"]},{"start":{"row":24,"column":7},"end":{"row":24,"column":8},"action":"insert","lines":["I"]},{"start":{"row":24,"column":8},"end":{"row":24,"column":9},"action":"insert","lines":["V"]},{"start":{"row":24,"column":9},"end":{"row":24,"column":10},"action":"insert","lines":["E"]}],[{"start":{"row":24,"column":10},"end":{"row":24,"column":11},"action":"insert","lines":[" "],"id":227}],[{"start":{"row":24,"column":11},"end":{"row":24,"column":12},"action":"insert","lines":["일"],"id":229}],[{"start":{"row":24,"column":12},"end":{"row":24,"column":13},"action":"insert","lines":["저"],"id":230}],[{"start":{"row":24,"column":13},"end":{"row":24,"column":14},"action":"insert","lines":[" "],"id":231}],[{"start":{"row":24,"column":14},"end":{"row":24,"column":15},"action":"insert","lines":["ㅇ"],"id":232}],[{"start":{"row":24,"column":14},"end":{"row":24,"column":15},"action":"remove","lines":["ㅇ"],"id":238},{"start":{"row":24,"column":13},"end":{"row":24,"column":14},"action":"remove","lines":[" "]},{"start":{"row":24,"column":12},"end":{"row":24,"column":13},"action":"remove","lines":["저"]}],[{"start":{"row":24,"column":12},"end":{"row":24,"column":13},"action":"insert","lines":["정"],"id":241}],[{"start":{"row":24,"column":13},"end":{"row":24,"column":14},"action":"insert","lines":[" "],"id":242}],[{"start":{"row":24,"column":14},"end":{"row":24,"column":15},"action":"insert","lines":["출"],"id":245}],[{"start":{"row":24,"column":15},"end":{"row":24,"column":16},"action":"insert","lines":["력"],"id":248}],[{"start":{"row":24,"column":16},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":249},{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":25,"column":4},"end":{"row":25,"column":5},"action":"insert","lines":["'"],"id":250},{"start":{"row":25,"column":5},"end":{"row":25,"column":6},"action":"insert","lines":["'"]},{"start":{"row":25,"column":6},"end":{"row":25,"column":7},"action":"insert","lines":["'"]}],[{"start":{"row":25,"column":7},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":251},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":26,"column":4},"end":{"row":26,"column":17},"action":"insert","lines":["VliveUpcoming"],"id":253}],[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"insert","lines":[" "],"id":254},{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"insert","lines":["="]}],[{"start":{"row":26,"column":19},"end":{"row":26,"column":20},"action":"insert","lines":[" "],"id":255}],[{"start":{"row":26,"column":19},"end":{"row":26,"column":20},"action":"remove","lines":[" "],"id":256},{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"remove","lines":["="]},{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"remove","lines":[" "]},{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"remove","lines":["g"]},{"start":{"row":26,"column":15},"end":{"row":26,"column":16},"action":"remove","lines":["n"]},{"start":{"row":26,"column":14},"end":{"row":26,"column":15},"action":"remove","lines":["i"]},{"start":{"row":26,"column":13},"end":{"row":26,"column":14},"action":"remove","lines":["m"]},{"start":{"row":26,"column":12},"end":{"row":26,"column":13},"action":"remove","lines":["o"]},{"start":{"row":26,"column":11},"end":{"row":26,"column":12},"action":"remove","lines":["c"]},{"start":{"row":26,"column":10},"end":{"row":26,"column":11},"action":"remove","lines":["p"]},{"start":{"row":26,"column":9},"end":{"row":26,"column":10},"action":"remove","lines":["U"]},{"start":{"row":26,"column":8},"end":{"row":26,"column":9},"action":"remove","lines":["e"]},{"start":{"row":26,"column":7},"end":{"row":26,"column":8},"action":"remove","lines":["v"]},{"start":{"row":26,"column":6},"end":{"row":26,"column":7},"action":"remove","lines":["i"]},{"start":{"row":26,"column":5},"end":{"row":26,"column":6},"action":"remove","lines":["l"]},{"start":{"row":26,"column":4},"end":{"row":26,"column":5},"action":"remove","lines":["V"]}],[{"start":{"row":26,"column":4},"end":{"row":26,"column":5},"action":"insert","lines":["v"],"id":257},{"start":{"row":26,"column":5},"end":{"row":26,"column":6},"action":"insert","lines":["l"]},{"start":{"row":26,"column":6},"end":{"row":26,"column":7},"action":"insert","lines":["i"]},{"start":{"row":26,"column":7},"end":{"row":26,"column":8},"action":"insert","lines":["v"]},{"start":{"row":26,"column":8},"end":{"row":26,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":26,"column":9},"end":{"row":26,"column":10},"action":"insert","lines":[" "],"id":258},{"start":{"row":26,"column":10},"end":{"row":26,"column":11},"action":"insert","lines":["="]}],[{"start":{"row":26,"column":11},"end":{"row":26,"column":12},"action":"insert","lines":[" "],"id":259}],[{"start":{"row":26,"column":11},"end":{"row":26,"column":12},"action":"remove","lines":[" "],"id":260},{"start":{"row":26,"column":10},"end":{"row":26,"column":11},"action":"remove","lines":["="]}],[{"start":{"row":26,"column":10},"end":{"row":26,"column":11},"action":"insert","lines":["="],"id":261}],[{"start":{"row":26,"column":11},"end":{"row":26,"column":12},"action":"insert","lines":[" "],"id":262}],[{"start":{"row":26,"column":12},"end":{"row":26,"column":25},"action":"insert","lines":["VliveUpcoming"],"id":263}],[{"start":{"row":26,"column":25},"end":{"row":26,"column":26},"action":"insert","lines":["."],"id":264},{"start":{"row":26,"column":26},"end":{"row":26,"column":27},"action":"insert","lines":["b"]},{"start":{"row":26,"column":27},"end":{"row":26,"column":28},"action":"insert","lines":["o"]},{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"insert","lines":["j"]},{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["e"]},{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["c"]},{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"insert","lines":["t"]},{"start":{"row":26,"column":32},"end":{"row":26,"column":33},"action":"insert","lines":["s"]},{"start":{"row":26,"column":33},"end":{"row":26,"column":34},"action":"insert","lines":["."]},{"start":{"row":26,"column":34},"end":{"row":26,"column":35},"action":"insert","lines":["o"]}],[{"start":{"row":26,"column":34},"end":{"row":26,"column":35},"action":"remove","lines":["o"],"id":265},{"start":{"row":26,"column":33},"end":{"row":26,"column":34},"action":"remove","lines":["."]},{"start":{"row":26,"column":32},"end":{"row":26,"column":33},"action":"remove","lines":["s"]},{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"remove","lines":["t"]},{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"remove","lines":["c"]},{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"remove","lines":["e"]},{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"remove","lines":["j"]},{"start":{"row":26,"column":27},"end":{"row":26,"column":28},"action":"remove","lines":["o"]},{"start":{"row":26,"column":26},"end":{"row":26,"column":27},"action":"remove","lines":["b"]}],[{"start":{"row":26,"column":26},"end":{"row":26,"column":27},"action":"insert","lines":["o"],"id":266},{"start":{"row":26,"column":27},"end":{"row":26,"column":28},"action":"insert","lines":["b"]},{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"insert","lines":["j"]},{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["e"]},{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["c"]},{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"insert","lines":["t"]},{"start":{"row":26,"column":32},"end":{"row":26,"column":33},"action":"insert","lines":["s"]},{"start":{"row":26,"column":33},"end":{"row":26,"column":34},"action":"insert","lines":["."]},{"start":{"row":26,"column":34},"end":{"row":26,"column":35},"action":"insert","lines":["o"]},{"start":{"row":26,"column":35},"end":{"row":26,"column":36},"action":"insert","lines":["r"]},{"start":{"row":26,"column":36},"end":{"row":26,"column":37},"action":"insert","lines":["d"]},{"start":{"row":26,"column":37},"end":{"row":26,"column":38},"action":"insert","lines":["e"]},{"start":{"row":26,"column":38},"end":{"row":26,"column":39},"action":"insert","lines":["r"]},{"start":{"row":26,"column":39},"end":{"row":26,"column":40},"action":"insert","lines":["_"]}],[{"start":{"row":26,"column":40},"end":{"row":26,"column":41},"action":"insert","lines":["b"],"id":267},{"start":{"row":26,"column":41},"end":{"row":26,"column":42},"action":"insert","lines":["y"]}],[{"start":{"row":26,"column":42},"end":{"row":26,"column":44},"action":"insert","lines":["()"],"id":268}],[{"start":{"row":26,"column":43},"end":{"row":26,"column":45},"action":"insert","lines":["''"],"id":269}],[{"start":{"row":26,"column":44},"end":{"row":26,"column":45},"action":"insert","lines":["s"],"id":270},{"start":{"row":26,"column":45},"end":{"row":26,"column":46},"action":"insert","lines":["t"]},{"start":{"row":26,"column":46},"end":{"row":26,"column":47},"action":"insert","lines":["a"]},{"start":{"row":26,"column":47},"end":{"row":26,"column":48},"action":"insert","lines":["r"]},{"start":{"row":26,"column":48},"end":{"row":26,"column":49},"action":"insert","lines":["t"]},{"start":{"row":26,"column":49},"end":{"row":26,"column":50},"action":"insert","lines":["_"]},{"start":{"row":26,"column":50},"end":{"row":26,"column":51},"action":"insert","lines":["a"]},{"start":{"row":26,"column":51},"end":{"row":26,"column":52},"action":"insert","lines":["t"]}],[{"start":{"row":26,"column":54},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":271},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":27,"column":4},"end":{"row":27,"column":14},"action":"insert","lines":["serializer"],"id":272}],[{"start":{"row":27,"column":14},"end":{"row":27,"column":15},"action":"insert","lines":[" "],"id":273},{"start":{"row":27,"column":15},"end":{"row":27,"column":16},"action":"insert","lines":["="]}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":[" "],"id":274},{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["v"]}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["v"],"id":275}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["U"],"id":276},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["p"]}],[{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"remove","lines":["p"],"id":277},{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["U"]}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["V"],"id":278},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["l"]},{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"insert","lines":["i"]}],[{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"remove","lines":["i"],"id":279},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"remove","lines":["l"]},{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["V"]}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["V"],"id":280},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["l"]},{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"insert","lines":["i"]},{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"insert","lines":["e"]},{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"insert","lines":["S"]},{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"insert","lines":["e"]},{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":["r"]},{"start":{"row":27,"column":24},"end":{"row":27,"column":25},"action":"insert","lines":["i"]}],[{"start":{"row":27,"column":25},"end":{"row":27,"column":26},"action":"insert","lines":["a"],"id":281},{"start":{"row":27,"column":26},"end":{"row":27,"column":27},"action":"insert","lines":["l"]},{"start":{"row":27,"column":27},"end":{"row":27,"column":28},"action":"insert","lines":["i"]},{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"insert","lines":["z"]},{"start":{"row":27,"column":29},"end":{"row":27,"column":30},"action":"insert","lines":["e"]},{"start":{"row":27,"column":30},"end":{"row":27,"column":31},"action":"insert","lines":["r"]}],[{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"remove","lines":["l"],"id":282}],[{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["l"],"id":283}],[{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"insert","lines":["v"],"id":284}],[{"start":{"row":27,"column":32},"end":{"row":27,"column":34},"action":"insert","lines":["()"],"id":285}],[{"start":{"row":27,"column":33},"end":{"row":27,"column":34},"action":"insert","lines":["v"],"id":286},{"start":{"row":27,"column":34},"end":{"row":27,"column":35},"action":"insert","lines":["l"]},{"start":{"row":27,"column":35},"end":{"row":27,"column":36},"action":"insert","lines":["i"]},{"start":{"row":27,"column":36},"end":{"row":27,"column":37},"action":"insert","lines":["v"]},{"start":{"row":27,"column":37},"end":{"row":27,"column":38},"action":"insert","lines":["e"]},{"start":{"row":27,"column":38},"end":{"row":27,"column":39},"action":"insert","lines":[","]}],[{"start":{"row":27,"column":39},"end":{"row":27,"column":40},"action":"insert","lines":[" "],"id":287},{"start":{"row":27,"column":40},"end":{"row":27,"column":41},"action":"insert","lines":["m"]},{"start":{"row":27,"column":41},"end":{"row":27,"column":42},"action":"insert","lines":["a"]},{"start":{"row":27,"column":42},"end":{"row":27,"column":43},"action":"insert","lines":["n"]},{"start":{"row":27,"column":43},"end":{"row":27,"column":44},"action":"insert","lines":["y"]},{"start":{"row":27,"column":44},"end":{"row":27,"column":45},"action":"insert","lines":["="]},{"start":{"row":27,"column":45},"end":{"row":27,"column":46},"action":"insert","lines":["t"]}],[{"start":{"row":27,"column":45},"end":{"row":27,"column":46},"action":"remove","lines":["t"],"id":288}],[{"start":{"row":27,"column":45},"end":{"row":27,"column":46},"action":"insert","lines":["T"],"id":289},{"start":{"row":27,"column":46},"end":{"row":27,"column":47},"action":"insert","lines":["r"]},{"start":{"row":27,"column":47},"end":{"row":27,"column":48},"action":"insert","lines":["u"]},{"start":{"row":27,"column":48},"end":{"row":27,"column":49},"action":"insert","lines":["e"]}],[{"start":{"row":27,"column":50},"end":{"row":28,"column":0},"action":"insert","lines":["",""],"id":290},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":4},"end":{"row":28,"column":5},"action":"insert","lines":["r"]},{"start":{"row":28,"column":5},"end":{"row":28,"column":6},"action":"insert","lines":["e"]},{"start":{"row":28,"column":6},"end":{"row":28,"column":7},"action":"insert","lines":["t"]},{"start":{"row":28,"column":7},"end":{"row":28,"column":8},"action":"insert","lines":["u"]},{"start":{"row":28,"column":8},"end":{"row":28,"column":9},"action":"insert","lines":["r"]},{"start":{"row":28,"column":9},"end":{"row":28,"column":10},"action":"insert","lines":["n"]}],[{"start":{"row":28,"column":10},"end":{"row":28,"column":11},"action":"insert","lines":[" "],"id":291},{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"insert","lines":["R"]},{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"insert","lines":["e"]},{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"insert","lines":["s"]},{"start":{"row":28,"column":14},"end":{"row":28,"column":15},"action":"insert","lines":["o"]},{"start":{"row":28,"column":15},"end":{"row":28,"column":16},"action":"insert","lines":["p"]},{"start":{"row":28,"column":16},"end":{"row":28,"column":17},"action":"insert","lines":["n"]},{"start":{"row":28,"column":17},"end":{"row":28,"column":18},"action":"insert","lines":["s"]},{"start":{"row":28,"column":18},"end":{"row":28,"column":19},"action":"insert","lines":["e"]}],[{"start":{"row":28,"column":19},"end":{"row":28,"column":21},"action":"insert","lines":["()"],"id":292}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":30},"action":"insert","lines":["serializer"],"id":293}],[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["."],"id":294},{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"insert","lines":["d"]},{"start":{"row":28,"column":32},"end":{"row":28,"column":33},"action":"insert","lines":["a"]},{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"insert","lines":["t"]},{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"insert","lines":["a"]}],[{"start":{"row":3,"column":40},"end":{"row":3,"column":41},"action":"insert","lines":[","],"id":295}],[{"start":{"row":3,"column":41},"end":{"row":3,"column":42},"action":"insert","lines":[" "],"id":296}],[{"start":{"row":3,"column":42},"end":{"row":3,"column":57},"action":"insert","lines":["VliveSerializer"],"id":297}],[{"start":{"row":28,"column":11},"end":{"row":28,"column":19},"action":"remove","lines":["Resopnse"],"id":298},{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"insert","lines":["r"]},{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"insert","lines":["e"]},{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"insert","lines":["s"]}],[{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"remove","lines":["s"],"id":299},{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"remove","lines":["e"]},{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"remove","lines":["r"]}],[{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"insert","lines":["R"],"id":300},{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"insert","lines":["e"]},{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"insert","lines":["s"]},{"start":{"row":28,"column":14},"end":{"row":28,"column":15},"action":"insert","lines":["p"]},{"start":{"row":28,"column":15},"end":{"row":28,"column":16},"action":"insert","lines":["o"]},{"start":{"row":28,"column":16},"end":{"row":28,"column":17},"action":"insert","lines":["n"]},{"start":{"row":28,"column":17},"end":{"row":28,"column":18},"action":"insert","lines":["s"]},{"start":{"row":28,"column":18},"end":{"row":28,"column":19},"action":"insert","lines":["e"]}],[{"start":{"row":0,"column":49},"end":{"row":0,"column":68},"action":"insert","lines":[", get_object_or_404"],"id":301,"ignore":true},{"start":{"row":26,"column":9},"end":{"row":26,"column":10},"action":"insert","lines":["s"]},{"start":{"row":27,"column":38},"end":{"row":27,"column":39},"action":"insert","lines":["s"]},{"start":{"row":30,"column":0},"end":{"row":40,"column":0},"action":"insert","lines":["@api_view(['GET'])  ","def schedule_vlive_item(request, vlive_pk):","    '''","    V-LIVE 일정 한개만 출력 임시","    '''","    vlive = get_object_or_404(VliveUpcoming, pk=vlive_pk)","    print(vlive)","    serializer = VliveSerializer(vlive)","    return Response(serializer.data)","    ",""]}],[{"start":{"row":67,"column":11},"end":{"row":69,"column":13},"action":"insert","lines":[" tmp = chart.find('a', {'class':'thumb _videoThumb'})","            poster_url = tmp.find('img')['src'] if tmp else ''","            #"],"id":302,"ignore":true}],[{"start":{"row":3,"column":25},"end":{"row":3,"column":30},"action":"insert","lines":["Vlive"],"id":303,"ignore":true},{"start":{"row":3,"column":52},"end":{"row":3,"column":57},"action":"insert","lines":["Video"]},{"start":{"row":4,"column":20},"end":{"row":4,"column":25},"action":"insert","lines":["Vlive"]},{"start":{"row":4,"column":32},"end":{"row":4,"column":63},"action":"remove","lines":["OfficialSchedule, VliveUpcoming"]},{"start":{"row":4,"column":32},"end":{"row":4,"column":42},"action":"insert","lines":["VliveVideo"]},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]},{"start":{"row":10,"column":25},"end":{"row":15,"column":7},"action":"insert","lines":["","EXPIRATION_DAYS = 3","DEFAULT_IMAGE_URL = 'https://bixbydevelopers.com/dev/static/bixby2logo.svg'","DEFAULT_STRING_VALUE = '-'","VIDEO_SIZE = 20","cnt = 0"]},{"start":{"row":17,"column":18},"end":{"row":17,"column":20},"action":"insert","lines":["  "]},{"start":{"row":18,"column":13},"end":{"row":18,"column":14},"action":"insert","lines":["v"]},{"start":{"row":18,"column":16},"end":{"row":18,"column":18},"action":"remove","lines":["st"]},{"start":{"row":18,"column":16},"end":{"row":18,"column":23},"action":"insert","lines":["ve_item"]},{"start":{"row":18,"column":31},"end":{"row":18,"column":41},"action":"insert","lines":[", vlive_pk"]},{"start":{"row":20,"column":4},"end":{"row":22,"column":46},"action":"remove","lines":["아이돌 일정 출력","    '''","    events = Event.objects.order_by('start_at'"]},{"start":{"row":20,"column":4},"end":{"row":23,"column":15},"action":"insert","lines":["V-LIVE 일정 한개만 출력 임시","    '''","    vlive = get_object_or_404(VliveEvent, pk=vlive_pk)","    print(vlive"]},{"start":{"row":24,"column":17},"end":{"row":24,"column":22},"action":"insert","lines":["Vlive"]},{"start":{"row":24,"column":38},"end":{"row":24,"column":54},"action":"remove","lines":["events, many=Tru"]},{"start":{"row":24,"column":38},"end":{"row":24,"column":42},"action":"insert","lines":["vliv"]},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"remove","lines":["",""]},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":19},"end":{"row":28,"column":23},"action":"remove","lines":["list"]},{"start":{"row":28,"column":19},"end":{"row":28,"column":26},"action":"insert","lines":["channel"]},{"start":{"row":28,"column":34},"end":{"row":28,"column":43},"action":"insert","lines":[", keyword"]},{"start":{"row":30,"column":11},"end":{"row":30,"column":16},"action":"remove","lines":["일정 출력"]},{"start":{"row":30,"column":11},"end":{"row":30,"column":20},"action":"insert","lines":["채널을 통해 검색"]},{"start":{"row":32,"column":0},"end":{"row":34,"column":0},"action":"insert","lines":["    tz = datetime.timezone(datetime.timedelta(hours=9))","    now = datetime.datetime.now(tz).date()",""]},{"start":{"row":34,"column":13},"end":{"row":34,"column":14},"action":"insert","lines":["("]},{"start":{"row":34,"column":19},"end":{"row":34,"column":55},"action":"remove","lines":["Upcoming.objects.order_by('start_at'"]},{"start":{"row":34,"column":19},"end":{"row":34,"column":154},"action":"insert","lines":["Event.objects.filter(channel__icontains=keyword) or VliveEvent.objects.filter(title__icontains=keyword)).filter(start_at__date__gte=now"]},{"start":{"row":35,"column":22},"end":{"row":35,"column":27},"action":"insert","lines":["Event"]},{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"remove","lines":["    "]},{"start":{"row":38,"column":18},"end":{"row":38,"column":20},"action":"remove","lines":["  "]},{"start":{"row":39,"column":4},"end":{"row":44,"column":16},"action":"remove","lines":["schedule_vlive_item(request, vlive_pk):","    '''","    V-LIVE 일정 한개만 출력 임시","    '''","    vlive = get_object_or_404(VliveUpcoming, pk=vlive_pk)","    print(vlive)"]},{"start":{"row":39,"column":4},"end":{"row":41,"column":175},"action":"insert","lines":["video_vlive_channel(request, keyword, call_cnt):","    start_idx = call_cnt * VIDEO_SIZE","    videos = (VliveVideo.objects.filter(channel__icontains=keyword) or VliveVideo.objects.filter(title__icontains=keyword)).order_by('-pk')[start_idx : start_idx + VIDEO_SIZE]"]},{"start":{"row":42,"column":22},"end":{"row":42,"column":27},"action":"insert","lines":["Video"]},{"start":{"row":42,"column":39},"end":{"row":42,"column":42},"action":"remove","lines":["liv"]},{"start":{"row":42,"column":39},"end":{"row":42,"column":54},"action":"insert","lines":["ideos, many=Tru"]},{"start":{"row":44,"column":0},"end":{"row":45,"column":4},"action":"remove","lines":["    ","    "]},{"start":{"row":47,"column":4},"end":{"row":48,"column":15},"action":"remove","lines":["","    current_tim"]},{"start":{"row":47,"column":4},"end":{"row":55,"column":8},"action":"insert","lines":["global cnt","    cnt += 1","","    # 스케쥴 크롤링","    vlive_base_url = 'https://www.vlive.tv'","    current_time = get_current_time() # int","    ","    tz = datetime.timezone(datetime.timedelta(hours=9))","    sinc"]},{"start":{"row":55,"column":34},"end":{"row":55,"column":43},"action":"insert","lines":["tz).date("]},{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["",""]},{"start":{"row":57,"column":4},"end":{"row":61,"column":65},"action":"remove","lines":["current_time = int(current_time.strftime('%Y%m%d'))","    vlive_base_url = 'https://www.vlive.tv'","    ","    for i in range(1):","        url = f\"https://www.vlive.tv/upcoming?d={current_time+i}\""]},{"start":{"row":57,"column":4},"end":{"row":79,"column":95},"action":"insert","lines":["remove_db_vlive_event(since)","    ","    for i in range(EXPIRATION_DAYS): #오늘 날짜로부터 3일까지 크롤링","        url = f'{vlive_base_url}/upcoming?d={current_time+i}'","        response = requests.get(url)","        soup = BeautifulSoup(response.text, 'html.parser')","        vlive_events = get_vlive_events(soup, current_time+i)","        update_db_vlive_event(vlive_events)","    ","    # 비디오 크롤링","    vlive_video_crawling()","","    return HttpResponse(cnt)","            ","# V_LIVE video 크롤링","def vlive_video_crawling():","    base_url = 'https://www.vlive.tv'","    pageNo = 1 # 계속 증가","    pageSize = 1000 #1000","","    while True:","        print(pageNo)","        url = f'{base_url}/home/video/more?pageNo={pageNo}&pageSize={pageSize}&viewType=recent'"]},{"start":{"row":80,"column":11},"end":{"row":80,"column":16},"action":"remove","lines":["ponse"]},{"start":{"row":81,"column":32},"end":{"row":81,"column":37},"action":"remove","lines":["ponse"]},{"start":{"row":82,"column":8},"end":{"row":82,"column":21},"action":"remove","lines":["upcoming_list"]},{"start":{"row":82,"column":8},"end":{"row":82,"column":14},"action":"insert","lines":["videos"]},{"start":{"row":82,"column":26},"end":{"row":82,"column":30},"action":"remove","lines":["('ul"]},{"start":{"row":82,"column":26},"end":{"row":82,"column":34},"action":"insert","lines":["_all('li"]},{"start":{"row":82,"column":46},"end":{"row":86,"column":0},"action":"remove","lines":["'upcoming_list'}).find_all('li')","        ","        ","        for chart in upcoming_list:",""]},{"start":{"row":82,"column":46},"end":{"row":94,"column":3},"action":"insert","lines":["\"video_list_cont\"})","        if not videos: ","            print('비디오가 없음')","            return","        for v in videos:","            tmp = v.find('a', {'class':'thumb_area'})","            if tmp == None: ","                print('tmp가 None')","                return","","            pk = int(tmp.get('data-seq'))","            if VliveVideo.objects.filter(pk=pk):","   "]},{"start":{"row":94,"column":15},"end":{"row":95,"column":0},"action":"insert","lines":[" return",""]},{"start":{"row":96,"column":12},"end":{"row":99,"column":8},"action":"remove","lines":["group_name = chart.find('em', {'class':'name'}) ","            group_name = group_name.text if group_name else ''","            ","        "]},{"start":{"row":96,"column":12},"end":{"row":126,"column":0},"action":"insert","lines":["channel = tmp.get('data-ga-cname') or DEFAULT_STRING_VALUE","            title = tmp.get('data-ga-name') or DEFAULT_STRING_VALUE","            img_tag = tmp.find('img')","            img_url = img_tag.get('src') if img_tag else DEFAULT_IMAGE_URL","","            video_url = base_url + (tmp.get('href') or '') ","            ","            VliveVideo(","                pk          = pk,","                channel     = channel,","                title       = title,","                img_url     = img_url,","                video_url   = video_url","            ).save()","        pageNo += 1","","","# custom functions     ","def get_current_time():","    tz = datetime.timezone(datetime.timedelta(hours=9))","    current_time = datetime.datetime.now(tz)","    current_time = int(current_time.strftime('%Y%m%d'))","    return current_time","","def get_channel(upcoming_list_chart):","    channel = upcoming_list_chart.find('em', {'class':'name'}) ","    channel = channel.text if channel else '-'","    return channel","","def get_start_at(upcoming_list_chart, current_time):",""]},{"start":{"row":126,"column":32},"end":{"row":126,"column":46},"action":"insert","lines":["upcoming_list_"]},{"start":{"row":127,"column":4},"end":{"row":129,"column":8},"action":"remove","lines":["        # print(time)","            ","        "]},{"start":{"row":127,"column":4},"end":{"row":131,"column":0},"action":"insert","lines":["start_at = datetime.datetime.strptime(time, '%Y%m%d %I:%M %p')","    return start_at","","def get_title(upcoming_list_chart):",""]},{"start":{"row":131,"column":16},"end":{"row":131,"column":30},"action":"insert","lines":["upcoming_list_"]},{"start":{"row":132,"column":0},"end":{"row":132,"column":8},"action":"remove","lines":["        "]},{"start":{"row":133,"column":4},"end":{"row":135,"column":18},"action":"remove","lines":["        ","            entering_url = vlive_base_url + title_tag['href']","            tmp = "]},{"start":{"row":133,"column":4},"end":{"row":136,"column":24},"action":"insert","lines":["return title","    ","def get_img_url(upcoming_list_chart):","    tmp = upcoming_list_"]},{"start":{"row":137,"column":4},"end":{"row":137,"column":18},"action":"remove","lines":["        poster"]},{"start":{"row":137,"column":4},"end":{"row":137,"column":7},"action":"insert","lines":["img"]},{"start":{"row":137,"column":49},"end":{"row":138,"column":32},"action":"remove","lines":["''","            # poster_url = chart"]},{"start":{"row":137,"column":49},"end":{"row":142,"column":24},"action":"insert","lines":["DEFAULT_IMAGE_URL","    return img_url","    ","def get_vlive_events(soup, start_date):","    vlive_events = []","    upcoming_list = soup"]},{"start":{"row":142,"column":31},"end":{"row":142,"column":32},"action":"remove","lines":["a"]},{"start":{"row":142,"column":31},"end":{"row":142,"column":33},"action":"insert","lines":["ul"]},{"start":{"row":142,"column":46},"end":{"row":143,"column":4},"action":"remove","lines":["thumb _videoThumb'}).find('img')['src']","    "]},{"start":{"row":142,"column":46},"end":{"row":146,"column":42},"action":"insert","lines":["upcoming_list'}).find_all('li')","    ","    for chart in upcoming_list:","        vlive_events.append({","            'channel': get_channel(chart),"]},{"start":{"row":147,"column":12},"end":{"row":147,"column":13},"action":"insert","lines":["'"]},{"start":{"row":147,"column":21},"end":{"row":148,"column":12},"action":"remove","lines":[" = datetime.datetime.strptime(time, '%Y%m%d %I:%M %p')","            "]},{"start":{"row":147,"column":21},"end":{"row":149,"column":43},"action":"insert","lines":["' : get_start_at(chart, start_date),","            'title' : get_title(chart),","            'img_url' : get_img_url(chart),"]},{"start":{"row":150,"column":8},"end":{"row":151,"column":0},"action":"insert","lines":["})",""]},{"start":{"row":151,"column":4},"end":{"row":154,"column":5},"action":"remove","lines":["VliveUpcoming( ","                title = title,","                group = group_name,","     "]},{"start":{"row":151,"column":4},"end":{"row":164,"column":0},"action":"insert","lines":["return vlive_events","","def remove_db_vlive_event(since): ","    # start_at이 since 이후인 일정들 모두 삭제함","    events = VliveEvent.objects.filter(start_at__date__gte = since)","    for event in events:","        event.delete()","    return","","def update_db_vlive_event(vlive_events):","    ","    for event in vlive_events:","        VliveEvent(",""]},{"start":{"row":164,"column":11},"end":{"row":164,"column":12},"action":"insert","lines":[" "]},{"start":{"row":164,"column":20},"end":{"row":164,"column":23},"action":"remove","lines":[" = "]},{"start":{"row":164,"column":20},"end":{"row":164,"column":28},"action":"insert","lines":["=event['"]},{"start":{"row":164,"column":36},"end":{"row":164,"column":38},"action":"insert","lines":["']"]},{"start":{"row":165,"column":12},"end":{"row":167,"column":24},"action":"remove","lines":["    site_url = entering_url,","                poster_url = poster_url","                ).save()"]},{"start":{"row":165,"column":12},"end":{"row":167,"column":36},"action":"insert","lines":["channel=event['channel'],","            title=event['title'],","            img_url=event['img_url']"]},{"start":{"row":168,"column":4},"end":{"row":169,"column":1},"action":"remove","lines":[""," "]},{"start":{"row":168,"column":7},"end":{"row":168,"column":38},"action":"remove","lines":["return HttpResponse(\"well done\""]},{"start":{"row":168,"column":7},"end":{"row":168,"column":15},"action":"insert","lines":[" ).save("]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":20,"column":4},"end":{"row":20,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1557648428000,"hash":"8acca8e47beaabbf77d183c079a5995a45a31ec2"}